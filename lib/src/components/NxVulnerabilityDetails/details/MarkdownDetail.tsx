/*
 * Copyright (c) 2019-present Sonatype, Inc.
 * This program and the accompanying materials are made available under
 * the terms of the Eclipse Public License 2.0 which accompanies this
 * distribution and is available at https://www.eclipse.org/legal/epl-2.0/.
 */
/* eslint react/prop-types: 0 */
import React, {FunctionComponent} from 'react';
import RenderMarkdown from './RenderMarkdown';
import { faExclamationCircle } from '@fortawesome/free-solid-svg-icons';

import NxFontAwesomeIcon from '../../NxFontAwesomeIcon/NxFontAwesomeIcon';
import RenderDetail from './RenderDetail';

export interface Props {
  title: string;
  markdown?: string | null;
  componentSpecificMarkdown?: string | null;
  warning?: string | null;
}

const MarkdownDetail: FunctionComponent<Props> =
  function MarkdownDetail({title, markdown, componentSpecificMarkdown, warning}) {
    return markdown || componentSpecificMarkdown ? (
      <RenderDetail title={title}>
        {/*
          This fragment is so that RenderDetail wraps this all in one .nx-read-only__data, not each piece separately
        */}
        <>
          {warning &&
            <p className="nx-p nx-vulnerability-details__warning">
              <NxFontAwesomeIcon icon={faExclamationCircle}/>
              <span><strong>Warning:</strong> {warning}</span>
            </p>
          }
          {markdown &&
            <RenderMarkdown>{markdown}</RenderMarkdown>
          }
          {componentSpecificMarkdown &&
            <RenderMarkdown>{componentSpecificMarkdown}</RenderMarkdown>
          }
        </>
      </RenderDetail>
    ) : null;
  };

export default MarkdownDetail;
